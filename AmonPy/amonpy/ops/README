This folder contains scripts to be run by user.

1) To run simulation use run_basic_sim.py:
    i) edit dbaccess.txt and enter your database hostname (e.g. db.hpc.rcc.psu.edu), 
       database name (e.g. AMON_test2), username and password.
    ii) run the script as: python run_basic_sim.py dbaccess.txt
    
2) To run clustering (archival) analysis use run_archival.py:
    i) edit dbaccess.txt and enter your database hostname (e.g. db.hpc.rcc.psu.edu), 
       database name (e.g. AMON_test2), username and password.
    ii) run the script as: python run_archival.py dbaccess.txt
    
3) To run real-time analysis, assuming you are receiving VOEvents from clients

    i) Start RabbitMQ server^(*), which serves as a broker for transmitting messages
       about new received events between the AMON server and AMON analysis code:
       
       sudo rabbitmq-server  
       
    ii) Run AMON analysis code as a Celery worker:
    
        celery worker --app=analyser --concurrency=1 -l info 
        
    iii) Cd to network directory and start the AMON server:
    
        twistd -l server.log --pidfile server.pid serverpost --port 8000 --iface localhost
        
    iv) Start the AMON client to simulate observatories sending VOEvents to AMON server
        in real-time:
        
        twistd -l client.log --pidfile client.pid clientpost --hostport "http://127.0.0.1:8000" 
        --epath /path_to_client_events
                       
       
       
    (*) Install RabbitMQ server, and then add a user, virtual host and set permission for 
    this user to use it 
    (http://docs.celeryproject.org/en/latest/getting-started/brokers/rabbitmq.html#broker-rabbitmq)
    
    i) sudo rabbitmqctl add_user myuser mypassword
    ii) sudo rabbitmqctl add_vhost myvhost  
    iii) sudo rabbitmqctl set_permissions -p myvhost myuser ".*" ".*" ".*"
    iv) Use the scutil command to permanently set your host name:

        sudo scutil --set HostName myhost.local
        Then add that host name to /etc/hosts so itâ€™s possible to resolve it back into an IP address:

        127.0.0.1       localhost myhost myhost.local   
       